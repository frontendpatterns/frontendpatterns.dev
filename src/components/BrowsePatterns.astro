---
import { getCollection } from "astro:content";
import Card from "./Card.astro";
import CategoryIllustration from "./CategoryIllustration.astro";

const categories = await getCollection("categories");
categories.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<ul class="grid gap-6 grid-cols-2 auto-rows-[minmax(0,auto)]">
	{
		categories.map((category) => (
			<li>
				<a
					href={`/t/${category.id}`}
					class="block h-full focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900"
				>
					<article class="group flex h-full flex-col gap-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-1 hover:shadow-lg dark:border-slate-800 dark:bg-slate-900 md:flex-row md:items-start md:gap-6">
						<div class="flex shrink-0 items-start">
							<CategoryIllustration
								slug={category.id}
								title={category.data.title}
							/>
						</div>
						<div class="flex flex-1 flex-col gap-3">
							<h3 class="text-lg font-semibold text-slate-900 transition-colors group-hover:text-sky-700 dark:text-slate-100 dark:group-hover:text-sky-300">
								{category.data.title}
							</h3>
							{category.data.description ? (
								<p class="text-sm leading-relaxed text-slate-600 dark:text-slate-300">
									{category.data.description}
								</p>
							) : null}
							<div class="mt-auto flex items-center gap-2 text-sm font-medium text-sky-700 transition group-hover:text-sky-800 dark:text-sky-300 dark:group-hover:text-sky-200">
								Browse
								<svg
									class="h-4 w-4 transition-transform group-hover:translate-x-1"
									viewBox="0 0 20 20"
									fill="currentColor"
									aria-hidden="true"
								>
									<path
										fill-rule="evenodd"
										d="M10.293 3.293a1 1 0 0 1 1.414 0l5 5a1 1 0 0 1 0 1.414l-5 5a1 1 0 1 1-1.414-1.414L13.586 10H4a1 1 0 1 1 0-2h9.586l-3.293-3.293a1 1 0 0 1 0-1.414z"
										clip-rule="evenodd"
									/>
								</svg>
							</div>
						</div>
					</article>
				</a>
			</li>
		))
	}
</ul>
